#include <stdio.h> // Подключаем стандартную библиотеку для вывода на экран

// Функция вывода массива на экран
void printArray(int arr[], int n){ // arr — массив, n — его размер
    for(int i = 0; i < n; i ++){      // Проходим по всем элементам массива
        printf("%d ",arr[i]);         // Выводим элемент и пробел
    }
    printf("\n");                     // Переход на новую строку после вывода всех элементов
}

// Рекурсивная быстрая сортировка Хоара
void quicksort(int arr[], int l, int r){ // arr — массив, l — левая граница, r — правая граница
    if (l >= r){                         // Базовый случай: если подмассив пуст или из одного элемента
        return;                          // ничего не делаем
    }
    int x = arr[(l + r) / 2];            // Выбираем опорный элемент — середина подмассива
    int i = l;                           // Указатель слева
    int j = r;                           // Указатель справа

    while(i<=j){                         // Пока указатели не пересеклись
        while(arr[i] < x){               // Двигаем i вправо, пока элемент меньше опорного
            i++;
        }
        while(arr[j]> x){                // Двигаем j влево, пока элемент больше опорного
            j--;
        }
        if (i <= j){                     // Если указатели не пересеклись — меняем элементы местами
            int t = arr[i];              // Сохраняем arr[i] во временную переменную
            arr[i] = arr[j];             // Перезаписываем arr[i] значением arr[j]
            arr[j] = t;                  // Перезаписываем arr[j] сохранённым значением arr[i]
            i++;                         // Сдвигаем оба указателя
            j--;
        }
    }
    quicksort(arr,l,j);                  // Рекурсивно сортируем левую часть (от l до j)
    quicksort(arr,i,r);                  // Рекурсивно сортируем правую часть (от i до r)
}

int main(){
    int arr[] = {32,34,45,65,78,1,23,53}; // Исходный массив для сортировки
    int n = sizeof(arr) / sizeof(arr[0]); // Вычисляем количество элементов в массиве
    quicksort(arr, 0, n - 1);             // Вызываем сортировку Хоара для всего массива
    printArray(arr,n);                    // Выводим отсортированный массив на экран
    return 0;                             // Завершаем программу
}