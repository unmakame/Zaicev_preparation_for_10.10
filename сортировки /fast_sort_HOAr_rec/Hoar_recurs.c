#include <stdio.h>      
#include <stdlib.h>



// Функция быстрой сортировки (quicksort)
// a - указатель на массив целых чисел, который сортируется
// l - индекс левого края подмассива для сортировки
// r - индекс правого края подмассива для сортировки
void quicksort(int *a, int l, int r) {
    if (l >= r) return; // Базовый случай рекурсии: если левая граница больше или равна правой, сортировать нечего, выходим из функции

    int x = a[(l + r) / 2]; // Выбор опорного элемента: берём элемент из середины текущего подмассива (индекс (l + r) / 2)
    int i = l, j = r;       // Инициализация двух указателей: i — для движения слева, j — для движения справа

    while (i <= j) {        // Пока указатели не пересеклись (i не больше j), продолжаем обработку подмассива
        while (a[i] < x) i++;   // Двигаем левый указатель i вправо, пока элемент меньше опорного x
        while (a[j] > x) j--;   // Двигаем правый указатель j влево, пока элемент больше опорного x

        if (i <= j) {           // Если указатели не пересеклись, выполняем обмен элементов
            int t = a[i];       // Сохраняем значение a[i] во временную переменную t
            a[i] = a[j];        // Присваиваем a[i] значение a[j]
            a[j] = t;           // Присваиваем a[j] значение t (то есть исходное a[i])
            i++;                // Сдвигаем левый указатель вправо
            j--;                // Сдвигаем правый указатель влево
        }
    }
    // После разделения массива на две части относительно опорного элемента
    quicksort(a, l, j); // Рекурсивно сортируем левую часть (от l до j)
    quicksort(a, i, r); // Рекурсивно сортируем правую часть (от i до r)
}

int main() {
    int x[] = {4,5,2,3,1,0,9,8,6,7}; // Объявление и инициализация массива x из 10 целых чисел
    int n = sizeof(x)/sizeof(x[0]);  // Вычисление количества элементов в массиве: общий размер массива делим на размер одного элемента

    quicksort(x, 0, n-1); // Вызов функции быстрой сортировки для всего массива: сортируем от индекса 0 до n-1

    for (int i = 0; i < n; i++)      // Цикл по всем элементам массива (от 0 до n-1)
        printf("%d ", x[i]);         // Вывод текущего элемента массива x[i] на экран, через пробел

    return 0;                        // Возврат 0 из функции main — признак успешного завершения программы
}